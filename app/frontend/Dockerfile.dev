# Frontend Development Dockerfile
FROM absequencealign-frontend-base:latest

# Set working directory
WORKDIR /app

# Switch to root temporarily to handle volume mounts
USER root

# Switch back to nextjs user
USER nextjs

# Expose port
EXPOSE 5679

# Use a simple command that fixes permissions and starts the dev server
CMD ["sh", "-c", "chown -R nextjs:nodejs /app && npm run dev:port"]
